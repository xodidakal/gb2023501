<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

	<mapper namespace="com.choongang.gb2023501.LearnGrpsMapper">
		<select id="selectLgpListByTitle" parameterType="LearnGrp" resultType="LearnGrp">			
			 SELECT g.g_attach_name, lg.lg_title, m.m_name, lg.lg_sdate, lg.lg_edate, lg.lg_to, (lg.lg_to - (count(lj.lgj_approval))) remainningTo
			 From   game g, learn_grp lg, member m, lg_join lj
			 where  lg.g_num = g.g_num 
			 and    lg.m_num = m.m_num 
			 and    lg.lg_num = lj.lg_num
			 and    lg.lg_title = #{lg_title} 
			 group by g.g_attach_name, lg.lg_title, m.m_name, lg.lg_sdate, lg.lg_edate, lg.lg_to
		</select>
		
		<select id="selectLgpListByTitleCnt" parameterType="String" resultType="int">
			SELECT count(*) FROM learn_grp where lg_title = #{lg_title}
		</select>
	</mapper>
